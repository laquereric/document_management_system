<div class="container-lg px-3 py-4">
  <!-- Header -->
  <div class="d-flex flex-items-center mb-4">
    <%= link_to activity_logs_path, class: "btn btn-outline mr-3" do %>
      <svg class="octicon octicon-arrow-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
        <path d="M7.78 12.53a.75.75 0 0 1-1.06 0L2.47 8.28a.75.75 0 0 1 0-1.06l4.25-4.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042L4.81 7h7.44a.75.75 0 0 1 0 1.5H4.81l2.97 2.97a.75.75 0 0 1 0 1.06Z"></path>
      </svg>
      Back to Activity Logs
    <% end %>
    <div>
      <h1 class="h2">Activity Details</h1>
      <p class="color-fg-muted">Detailed information about this activity</p>
    </div>
  </div>

  <!-- Activity Details -->
  <div class="Box">
    <div class="Box-header">
      <h3 class="Box-title">Activity Information</h3>
    </div>
    <div class="Box-body">
      <div class="Timeline">
        <div class="TimelineItem">
          <div class="TimelineItem-badge">
            <% case @activity_log.action %>
            <% when 'created' %>
              <svg class="octicon octicon-plus" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                <path d="M8 2a.75.75 0 0 1 .75.75v4.5h4.5a.75.75 0 0 1 0 1.5h-4.5v4.5a.75.75 0 0 1-1.5 0v-4.5h-4.5a.75.75 0 0 1 0-1.5h4.5v-4.5A.75.75 0 0 1 8 2Z"></path>
              </svg>
            <% when 'updated' %>
              <svg class="octicon octicon-pencil" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                <path d="M11.013 1.427a1.75 1.75 0 0 1 2.474 0l1.086 1.086a1.75 1.75 0 0 1 0 2.474l-.897.897a.75.75 0 0 1-.53.22H13.25a.75.75 0 0 1-.75-.75v-1.5a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75v1.5a.75.75 0 0 1-.75.75H9.5a.75.75 0 0 1-.53-.22l-.897-.897a1.75 1.75 0 0 1 0-2.474l1.086-1.086ZM8.293 4.293a.25.25 0 0 0-.354 0l-3.5 3.5a.25.25 0 0 0-.073.177v.5a.25.25 0 0 0 .25.25h.5a.25.25 0 0 0 .177-.073l3.5-3.5a.25.25 0 0 0 0-.354Z"></path>
                <path d="M1.427 11.013a1.75 1.75 0 0 1 0-2.474l.897-.897a.75.75 0 0 1 .53-.22H4.75a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 0 .75.75h1.5a.75.75 0 0 0 .75-.75v-1.5a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .53.22l.897.897a1.75 1.75 0 0 1 0 2.474l-.897.897a.75.75 0 0 1-.53.22H9.5a.75.75 0 0 1-.75-.75v-1.5a.75.75 0 0 0-.75-.75h-1.5a.75.75 0 0 0-.75.75v1.5a.75.75 0 0 1-.75.75H4.75a.75.75 0 0 1-.53-.22l-.897-.897Z"></path>
              </svg>
            <% when 'status_change' %>
              <svg class="octicon octicon-arrow-switch" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                <path d="M5.22 14.78a.75.75 0 0 1-1.06 0L.47 11.03a.75.75 0 0 1 0-1.06l3.75-3.75a.75.75 0 0 1 1.06 1.06L2.81 10.5H14.5a.75.75 0 0 1 0 1.5H2.81l2.47 2.47a.75.75 0 0 1 0 1.06Zm5.56-9.5a.75.75 0 0 1 1.06 0l3.75 3.75a.75.75 0 0 1 0 1.06l-3.75 3.75a.75.75 0 1 1-1.06-1.06l2.47-2.47H1.5a.75.75 0 0 1 0-1.5h11.69l-2.47-2.47a.75.75 0 0 1 0-1.06Z"></path>
              </svg>
            <% else %>
              <svg class="octicon octicon-dot" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                <path d="M8 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8Z"></path>
              </svg>
            <% end %>
          </div>
          
          <div class="TimelineItem-body">
            <div class="d-flex flex-items-center justify-content-between mb-3">
              <div>
                <h4 class="mb-1">
                  <%= @activity_log.action_description %>
                </h4>
                <div class="text-small color-fg-muted">
                  <%= @activity_log.created_at.strftime("%B %d, %Y at %I:%M %p") %>
                </div>
              </div>
            </div>

            <!-- User Information -->
            <div class="Box mb-3">
              <div class="Box-header">
                <h5 class="Box-title">User</h5>
              </div>
              <div class="Box-body">
                <div class="d-flex flex-items-center">
                  <div class="avatar avatar-small mr-3">
                    <div class="avatar-inner">
                      <%= @activity_log.user&.name&.split(' ')&.map(&:first)&.join&.upcase || "U" %>
                    </div>
                  </div>
                  <div>
                    <div class="text-bold"><%= @activity_log.user&.name || "Unknown User" %></div>
                    <div class="text-small color-fg-muted"><%= @activity_log.user&.email || "No email" %></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Document Information -->
            <% if @activity_log.document %>
              <div class="Box mb-3">
                <div class="Box-header">
                  <h5 class="Box-title">Document</h5>
                </div>
                <div class="Box-body">
                  <div class="d-flex flex-items-center justify-content-between">
                    <div>
                      <div class="text-bold">
                        <%= link_to @activity_log.document.title, document_path(@activity_log.document), class: "Link--primary" %>
                      </div>
                      <div class="text-small color-fg-muted">
                        Created by <%= @activity_log.document.author&.name || "Unknown" %>
                      </div>
                    </div>
                    <div class="d-flex flex-items-center gap-2">
                      <% if @activity_log.document.status %>
                        <%= render(Ui::StatusBadgeComponent.new(status: @activity_log.document.status)) %>
                      <% end %>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>

            <!-- Status Change Details -->
            <% if @activity_log.action == 'status_change' %>
              <div class="Box mb-3">
                <div class="Box-header">
                  <h5 class="Box-title">Status Change</h5>
                </div>
                <div class="Box-body">
                  <div class="d-flex flex-items-center gap-3">
                    <div class="d-flex flex-items-center gap-2">
                      <span class="text-small color-fg-muted">From:</span>
                      <% if @activity_log.old_status %>
                        <%= render(Ui::StatusBadgeComponent.new(status: @activity_log.old_status)) %>
                      <% else %>
                        <span class="Label Label--secondary">No Status</span>
                      <% end %>
                    </div>
                    <svg class="octicon octicon-arrow-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
                      <path d="M8.22 2.97a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l2.97-2.97H3.75a.75.75 0 0 1 0-1.5h7.44L8.22 2.97Z"></path>
                    </svg>
                    <div class="d-flex flex-items-center gap-2">
                      <span class="text-small color-fg-muted">To:</span>
                      <% if @activity_log.new_status %>
                        <%= render(Ui::StatusBadgeComponent.new(status: @activity_log.new_status)) %>
                      <% else %>
                        <span class="Label Label--secondary">No Status</span>
                      <% end %>
                    </div>
                  </div>
                </div>
              </div>
            <% end %>

            <!-- Notes -->
            <% if @activity_log.notes.present? %>
              <div class="Box">
                <div class="Box-header">
                  <h5 class="Box-title">Notes</h5>
                </div>
                <div class="Box-body">
                  <p class="mb-0"><%= @activity_log.notes %></p>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
