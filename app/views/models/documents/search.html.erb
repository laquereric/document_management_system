<% content_for :title, "Search Results" %>

<div class="container-lg px-3 py-4">
  <!-- Header -->
  <div class="d-flex flex-items-center flex-justify-between mb-4">
    <div>
      <h1 class="h2">Search Results</h1>
      <p class="color-fg-muted">
        Found <%= @documents.count %> document<%= 's' unless @documents.count == 1 %>
        <% if params[:q] && params[:q][:title_or_content_cont].present? %>
          for "<%= params[:q][:title_or_content_cont] %>"
        <% end %>
      </p>
    </div>
    <div class="d-flex flex-items-center gap-2">
      <%= link_to documents_path, class: "btn" do %>
        <svg class="octicon octicon-arrow-left mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16">
          <path d="M7.78 12.53a.75.75 0 0 1-1.06 0L2.47 8.28a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 1.06L4.81 7h7.44a.75.75 0 0 1 0 1.5H4.81l2.97 2.97a.75.75 0 0 1 0 1.06Z"></path>
        </svg>
        Back to Documents
      <% end %>
    </div>
  </div>

  <!-- Search Form -->
  <div class="Box mb-4">
    <div class="Box-header">
      <h3 class="Box-title">Refine Search</h3>
    </div>
    <div class="Box-body">
      <% if defined?(Document) %>
        <% q = Document.ransack(params[:q]) %>
        <%= render(Layout::Navigation::Search::SearchFormComponent.new(q: q)) %>
      <% end %>
    </div>
  </div>

  <!-- Search Results -->
  <div class="Box">
    <div class="Box-header">
      <h3 class="Box-title">
        Results
        <span class="Counter"><%= @documents.count %></span>
      </h3>
    </div>

    <div class="Box-body">
      <% if @documents&.any? %>
        <div class="row g-3">
          <% @documents.each do |document| %>
            <div class="col-12 col-md-6 col-lg-4">
              <%= render(Models::Documents::CardComponent.new(document: document)) %>
            </div>
          <% end %>
        </div>
      <% else %>
        <%= render(Ui::EmptyStateComponent.new(
          title: "No Results Found",
          description: "Try adjusting your search criteria or browse all documents.",
          icon: "search",
          action: {
            text: "Browse All Documents",
            url: documents_path
          }
        )) %>
      <% end %>
    </div>
  </div>
</div>
