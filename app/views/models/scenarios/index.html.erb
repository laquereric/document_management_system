<% content_for :title, "Manage Scenarios" %>

<%= render(Layout::PageContent.new(padding: :none)) do %>
  <!-- Page Header -->
  <%= render(Layout::PageHeader.new(
    title: "Manage Scenarios",
    description: "Manage and organize document scenarios across the system",
    icon: "list-ordered",
    action: {
      text: "New Scenario",
      url: new_admin_scenario_path
    }
  )) %>

  <!-- Search and Filters -->
  <%= render(Layout::CardList::SearchFilterSort::SearchAndFiltersComponent.new(
    search_object: @q,
    url: admin_scenarios_path,
    title: "Search & Filters",
    fields: [
      {
        name: :name_cont,
        label: "Scenario Name",
        placeholder: "Search by scenario name..."
      }
    ]
  )) %>

  <!-- Scenarios Section -->
  <div class="mt-5">
    <div class="d-flex flex-items-center flex-justify-between mb-3">
      <h2 class="f4 text-semibold">
        Scenarios
        <% if @scenarios.respond_to?(:total_count) %>
          <span class="Counter"><%= @scenarios.total_count %></span>
        <% else %>
          <span class="Counter"><%= @scenarios.count %></span>
        <% end %>
      </h2>
    </div>

    <% if @scenarios&.any? %>
      <div class="Box">
        <div class="Box-body">
          <div class="row g-3">
            <% @scenarios.each do |scenario| %>
              <div class="col-12 col-md-6 col-lg-4">
                <%= render(Models::Scenario::CardComponent.new(
                  scenario: scenario,
                  show_actions: true,
                  admin_context: true
                )) %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% else %>
      <%= render(Ui::EmptyStateComponent.new(
        title: "No scenarios found",
        description: "Get started by creating your first scenario.",
        icon: "list-ordered",
        action: {
          text: "Create Scenario",
          url: new_admin_scenario_path
        }
      )) %>
    <% end %>
  </div>
<% end %>
