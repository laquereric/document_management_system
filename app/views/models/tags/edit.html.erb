<% content_for :title, "Admin - Edit Tag: #{@tag.name}" %>

<div class="container-lg px-3 py-4">
  <!-- Header -->
  <div class="d-flex flex-items-center flex-justify-between mb-4">
    <div>
      <h1 class="h2 mb-1">Edit Tag</h1>
      <p class="text-gray">Update tag information and settings</p>
    </div>
    <div class="d-flex flex-items-center gap-2">
      <%= link_to models_tag_path(@tag), class: "btn btn-outline" do %>
        <svg class="octicon octicon-eye mr-2" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
          <path d="M1.679 7.932c.412-.621 1.242-1.75 2.366-2.717C5.175 4.242 6.527 3.5 8 3.5c1.473 0 2.824.742 3.955 1.715 1.124.967 1.954 2.096 2.366 2.717a.119.119 0 010 .136c-.412.621-1.242 1.75-2.366 2.717C10.825 11.758 9.473 12.5 8 12.5c-1.473 0-2.824-.742-3.955-1.715C2.868 9.687 2.038 8.558 1.626 7.937a.119.119 0 010-.136zM8 2c-1.981 0-3.67.992-4.933 2.078C1.797 5.169.88 6.423.43 7.1a1.619 1.619 0 000 1.798c.45.678 1.367 1.932 2.637 3.024C4.329 13.008 6.019 14 8 14c1.981 0 3.67-.992 4.933-2.078 1.27-1.091 2.187-2.345 2.637-3.023a1.619 1.619 0 000-1.798c-.45-.678-1.367-1.932-2.637-3.023C11.671 2.992 9.981 2 8 2zm0 8a2 2 0 100-4 2 2 0 000 4z"/>
        </svg>
        View Tag
      <% end %>
      <%= link_to models_tags_path, class: "btn btn-outline" do %>
        <svg class="octicon octicon-arrow-left mr-2" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
          <path d="M7.78 12.53a.75.75 0 01-1.06 0L2.47 8.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 1.06L4.81 7h7.44a.75.75 0 010 1.5H4.81l2.97 2.97a.75.75 0 010 1.06z"/>
        </svg>
        Back to Tags
      <% end %>
    </div>
  </div>

  <div class="Layout Layout--sidebarPosition-start Layout--sidebar-narrow">
    <div class="Layout-main">
      <div class="Box">
        <div class="Box-header">
          <h3 class="Box-title">Tag Information</h3>
        </div>
        <div class="Box-body">
          <%= form_with model: @tag, local: true, class: "form" do |form| %>
            <% if @tag.errors.any? %>
              <div class="flash flash-error mb-3">
                <h4 class="flash-heading">Please correct the following errors:</h4>
                <ul class="list-style-none">
                  <% @tag.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                  <% end %>
                </ul>
              </div>
            <% end %>

            <div class="form-group">
              <%= form.label :name, class: "form-label" %>
              <%= form.text_field :name, class: "form-control", placeholder: "Enter tag name" %>
              <p class="form-note">Choose a descriptive name for the tag</p>
            </div>

            <div class="form-group">
              <%= form.label :color, class: "form-label" %>
              <%= form.select :color, 
                  options_for_select([
                    ['Default', 'secondary'],
                    ['Blue', 'primary'],
                    ['Green', 'success'],
                    ['Yellow', 'warning'],
                    ['Red', 'danger'],
                    ['Purple', 'accent']
                  ], @tag.color), 
                  { prompt: "Select a color" }, 
                  class: "form-select" %>
              <p class="form-note">Choose a color to help identify this tag</p>
            </div>

            <div class="form-actions">
              <%= form.submit "Update Tag", class: "btn btn-primary" %>
              <%= link_to "Cancel", models_tag_path(@tag), class: "btn" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <div class="Layout-sidebar">
      <!-- Current Tag Info -->
      <div class="Box mb-3">
        <div class="Box-header">
          <h3 class="Box-title">Current Tag</h3>
        </div>
        <div class="Box-body">
          <div class="d-flex flex-items-center mb-2">
            <span class="Label Label--<%= @tag.color || 'secondary' %> mr-2"><%= @tag.name %></span>
          </div>
          <div class="text-gray text-small">
            <div class="mb-1">
              <strong>Color:</strong> <%= @tag.color&.titleize || 'Default' %>
            </div>
            <div class="mb-1">
              <strong>Documents:</strong> <%= pluralize(@tag.documents.count, 'document') %>
            </div>
            <div>
              <strong>Created:</strong> <%= @tag.created_at.strftime("%B %d, %Y") %>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="Box">
        <div class="Box-header">
          <h3 class="Box-title">Quick Actions</h3>
        </div>
        <div class="Box-body">
          <div class="d-flex flex-column gap-2">
            <%= link_to models_tag_path(@tag), class: "btn btn-outline btn-sm" do %>
              <svg class="octicon octicon-eye mr-2" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M1.679 7.932c.412-.621 1.242-1.75 2.366-2.717C5.175 4.242 6.527 3.5 8 3.5c1.473 0 2.824.742 3.955 1.715 1.124.967 1.954 2.096 2.366 2.717a.119.119 0 010 .136c-.412.621-1.242 1.75-2.366 2.717C10.825 11.758 9.473 12.5 8 12.5c-1.473 0-2.824-.742-3.955-1.715C2.868 9.687 2.038 8.558 1.626 7.937a.119.119 0 010-.136zM8 2c-1.981 0-3.67.992-4.933 2.078C1.797 5.169.88 6.423.43 7.1a1.619 1.619 0 000 1.798c.45.678 1.367 1.932 2.637 3.024C4.329 13.008 6.019 14 8 14c1.981 0 3.67-.992 4.933-2.078 1.27-1.091 2.187-2.345 2.637-3.023a1.619 1.619 0 000-1.798c-.45-.678-1.367-1.932-2.637-3.023C11.671 2.992 9.981 2 8 2zm0 8a2 2 0 100-4 2 2 0 000 4z"/>
              </svg>
              View Tag Details
            <% end %>
            <%= link_to models_tag_path(@tag), method: :delete, data: { confirm: "Are you sure you want to delete this tag? This action cannot be undone." }, class: "btn btn-danger btn-sm" do %>
              <svg class="octicon octicon-trash mr-2" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M10.5 4.5a.75.75 0 00-1.5 0v1h-3v-1a.75.75 0 00-1.5 0v1h-2.25a.75.75 0 000 1.5H2v8.25c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 15.25V7h.75a.75.75 0 000-1.5H12.5v-1zM11 7v8.25a.25.25 0 01-.25.25h-8.5A.25.25 0 013 15.25V7h8z"/>
              </svg>
              Delete Tag
            <% end %>
            <%= link_to models_tags_path, class: "btn btn-outline btn-sm" do %>
              <svg class="octicon octicon-list mr-2" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75.75a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 3a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM2 7a1 1 0 11-2 0 1 1 0 012 0zm-1 3a1 1 0 100 2 1 1 0 000-2zm3.75.75a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z"/>
              </svg>
              All Tags
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
