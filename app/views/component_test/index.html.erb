<% content_for :title, "Component Test Page" %>

<!-- Header Region -->
<div class="container-lg px-3 py-4">
  <div class="d-flex flex-column flex-sm-row flex-items-start flex-sm-items-center flex-sm-justify-between mb-4">
    <div class="mb-3 mb-sm-0">
      <h1 class="h1">Component Test Page</h1>
      <p class="color-fg-muted mb-0">Demonstrating all components with Primer layout</p>
    </div>
  </div>
      
  <!-- Search Form -->
  <div class="Box mb-4">
    <div class="Box-header">
      <h3 class="Box-title">Search Components</h3>
    </div>
    <div class="Box-body">
      <%= render(Layout::Navigation::Search::SearchFormComponent.new(q: @q)) %>
    </div>
  </div>
      
  <!-- Stats Cards -->
  <div class="d-flex flex-wrap gap-3 mb-4">
    <div class="flex-auto" style="min-width: 200px;">
      <%= render(Layout::Dashboard::StatsCardComponent.new(
        title: "Sample Documents",
        value: 25,
        icon: "file-text",
        color: "primary"
      )) %>
    </div>
    <div class="flex-auto" style="min-width: 200px;">
      <%= render(Layout::Dashboard::StatsCardComponent.new(
        title: "Active Teams",
        value: 8,
        icon: "people",
        color: "success"
      )) %>
    </div>
    <div class="flex-auto" style="min-width: 200px;">
      <%= render(Layout::Dashboard::StatsCardComponent.new(
        title: "Pending Reviews",
        value: 12,
        icon: "clock",
        color: "warning"
      )) %>
    </div>
    <div class="flex-auto" style="min-width: 200px;">
      <%= render(Layout::Dashboard::StatsCardComponent.new(
        title: "Total Users",
        value: 45,
        icon: "person-badge",
        color: "info"
      )) %>
    </div>
  </div>
      
  <!-- Document Components -->
  <div class="Box mb-4">
    <div class="Box-header">
      <h3 class="Box-title">Document Components</h3>
    </div>
    <div class="Box-body">
      <div class="d-flex flex-wrap gap-3">
        <div class="flex-auto" style="min-width: 300px;">
          <h5>Document Card</h5>
          <% if @sample_document %>
            <%= render(Models::Documents::CardComponent.new(document: @sample_document)) %>
          <% else %>
            <%= render(Ui::EmptyStateComponent.new(
              title: "No Sample Document",
              description: "Create a document to see the card component in action.",
              icon: "file-text",
              action: {
                text: "Create Document",
                url: new_document_path
              }
            )) %>
          <% end %>
        </div>
        
        <div class="col-md-6">
          <h5>Document List</h5>
          <% if @sample_documents&.any? %>
            <%= render(Layout::CardList::ListComponent.new(
              documents: @sample_documents,
              search: @sample_search
            )) %>
          <% else %>
            <%= render(Ui::EmptyStateComponent.new(
              title: "No Documents",
              description: "No documents available to display in the list.",
              icon: "file-text"
            )) %>
          <% end %>
        </div>
      </div>
      
      <!-- Team Components -->
      <div class="row mb-4">
        <div class="col-12">
          <h3>Team Components</h3>
        </div>
      </div>
      
      <div class="row mb-4">
        <% if @sample_teams&.any? %>
          <% @sample_teams.each do |team| %>
            <div class="col-md-4 mb-3">
              <%= render(Models::Teams::TeamCardComponent.new(team: team, current_user: current_user)) %>
            </div>
          <% end %>
        <% else %>
          <div class="col-12">
            <%= render(Ui::EmptyStateComponent.new(
              title: "No Teams",
              description: "No teams available to display.",
              icon: "people"
            )) %>
          </div>
        <% end %>
      </div>
      
      <!-- Activity Log Components -->
      <div class="row mb-4">
        <div class="col-12">
          <h3>Activity Log Components</h3>
        </div>
      </div>
      
      <div class="row mb-4">
        <div class="col-12">
          <% if @sample_activities&.any? %>
                          <%= render(Models::Activities::ActivityListComponent.new(
              activities: @sample_activities,
              title: "Sample Activity Log",
              show_pagination: false
            )) %>
          <% else %>
            <%= render(Ui::EmptyStateComponent.new(
              title: "No Activity",
              description: "No activity logs available to display.",
              icon: "activity"
            )) %>
          <% end %>
        </div>
      </div>
      
      <!-- UI Components -->
      <div class="row mb-4">
        <div class="col-12">
          <h3>UI Components</h3>
        </div>
      </div>
      
      <div class="row mb-4">
        <div class="col-md-6">
          <h5>Status Badges</h5>
          <div class="mb-2">
            <% if @sample_statuses&.any? %>
              <% @sample_statuses.each do |status| %>
                <%= render(Ui::StatusBadgeComponent.new(status: status)) %>
              <% end %>
            <% else %>
              <span class="badge bg-primary">Sample Status</span>
              <span class="badge bg-success">Active</span>
              <span class="badge bg-warning">Pending</span>
            <% end %>
          </div>
        </div>
        
        <div class="col-md-6">
          <h5>Tag Badges</h5>
          <div class="mb-2">
            <% if @sample_tags&.any? %>
              <% @sample_tags.each do |tag| %>
                <%= render(Models::Tags::TagItemComponent.new(tag: tag)) %>
              <% end %>
            <% else %>
              <span class="badge bg-secondary">Sample Tag</span>
              <span class="badge bg-secondary">Important</span>
              <span class="badge bg-secondary">Review</span>
            <% end %>
          </div>
        </div>
      </div>
      
      <!-- Form Components -->
      <div class="row mb-4">
        <div class="col-12">
          <h3>Form Components</h3>
        </div>
      </div>
      
      <div class="row mb-4">
        <div class="col-12">
          <div class="Box">
            <div class="Box-header">
              <h3 class="Box-title">Document Form</h3>
            </div>
            <div class="Box-body">
              <% if defined?(Document) && defined?(Folder) && defined?(Status) && defined?(ScenarioType) %>
                <% begin %>
                  <% sample_folder = Folder.first || Folder.new(name: "Sample Folder") %>
                  <% sample_document = Document.new(folder: sample_folder) %>
                  <%= render(Forms::DocumentFormComponent.new(document: sample_document)) %>
                <% rescue => e %>
                  <%= render(Ui::EmptyStateComponent.new(
                    title: "Form Unavailable",
                    description: "Unable to create form due to: #{e.message}",
                    icon: "file-text"
                  )) %>
                <% end %>
              <% else %>
                <%= render(Ui::EmptyStateComponent.new(
                  title: "Document Form Unavailable",
                  description: "Required models (Document, Folder, Status, ScenarioType) are not available in this environment.",
                  icon: "file-text"
                )) %>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
