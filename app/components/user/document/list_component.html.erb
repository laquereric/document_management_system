<div class="document-list">
  <!-- List Header with Controls -->
  <div class="d-flex flex-items-center flex-justify-between mb-3 pb-3 border-bottom">
    <!-- Title and Count -->
    <div class="d-flex flex-items-center">
      <h2 class="h3 mb-0">Documents</h2>
      <span class="Counter ml-2"><%= documents.count %></span>
    </div>

    <!-- Controls -->
    <div class="d-flex flex-items-center gap-2">
      <!-- Layout Toggle -->
      <div class="BtnGroup">
        <% layout_options.each do |option| %>
          <%= render(Primer::Beta::Button.new(
            scheme: option[:active] ? :primary : :default,
            size: :small,
            "aria-label": option[:label],
            data: { action: "list:layout", layout: option[:value] }
          )) do %>
            <%= render(Primer::Beta::Octicon.new(icon: option[:icon])) %>
          <% end %>
        <% end %>
      </div>

      <!-- Sort Dropdown -->
      <% if show_sorting %>
        <%= render(Primer::Alpha::ActionMenu.new(
          menu_id: "sort-menu",
          position: :relative
        )) do |menu| %>
          <% menu.with_show_button do %>
            <%= render(Primer::Beta::Button.new(
              scheme: :default,
              size: :small
            )) do %>
              Sort: <%= current_sort.to_s.humanize %>
              <%= render(Primer::Beta::Octicon.new(icon: :"chevron-down", ml: 1)) %>
            <% end %>
          <% end %>

          <% sort_options.each do |option| %>
            <% menu.with_item(
              label: option[:label],
              href: "#",
              data: { action: "list:sort", sort: option[:value] }
            ) do %>
              <%= option[:label] %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>

      <!-- Filter Toggle -->
      <% if show_filters %>
        <%= render(Primer::Beta::Button.new(
          scheme: :default,
          size: :small,
          data: { action: "list:toggle-filters" }
        )) do %>
          <%= render(Primer::Beta::Octicon.new(icon: :filter, mr: 1)) %>
          Filters
        <% end %>
      <% end %>
    </div>
  </div>

  <!-- Filter Panel (Hidden by default) -->
  <% if show_filters %>
    <div class="filter-panel d-none mb-4">
      <%= render(User::Document::FilterPanelComponent.new(search: search)) %>
    </div>
  <% end %>

  <!-- Document List/Grid -->
  <% if documents.any? %>
    <% if layout == :table %>
      <%= render(User::Document::TableComponent.new(documents: documents)) %>
    <% else %>
      <div class="<%= container_classes %>">
        <% documents.each do |document| %>
          <%= render(User::Document::CardComponent.new(
            document: document,
            layout: layout
          )) %>
        <% end %>
      </div>
    <% end %>
  <% else %>
    <!-- Empty State -->
    <div class="blankslate">
      <%= render(Primer::Beta::Octicon.new(icon: :file, size: :large, mb: 3)) %>
      <h3 class="blankslate-heading">No documents found</h3>
      <p class="blankslate-body">
        Get started by creating your first document.
      </p>
      <%= render(Primer::Beta::Button.new(
        href: new_document_path,
        scheme: :primary
      )) do %>
        Create Document
      <% end %>
    </div>
  <% end %>
</div>
