<%= render(Primer::Beta::BorderBox.new) do %>
  <!-- Card Header -->
  <%= render(Primer::Beta::BorderBox::Header.new) do %>
    <div class="d-flex flex-items-center flex-justify-between">
      <div class="d-flex flex-items-center">
        <div class="mr-3">
          <%= render(Primer::Beta::Octicon.new(icon: "person", size: :small, color: :muted)) %>
        </div>
        <div class="flex-1">
          <h4 class="f4 text-semibold mb-1">
            <%= link_to user.name, models_user_path(user), class: "Link--primary" %>
          </h4>
          <span class="f6 color-fg-muted"><%= user.email %></span>
        </div>
      </div>
      
      <% if show_admin_panel_actions? %>
        <%= render(Layout::Card::ActionsMenuComponent.new(resource: user, resource_type: 'user')) %>
      <% end %>
    </div>
  <% end %>

  <!-- Card Body -->
  <%= render(Primer::Beta::BorderBox::Body.new) do %>
    <div class="d-flex flex-column" style="gap: 12px;">
      <!-- Role -->
      <div class="d-flex flex-items-center flex-justify-between p-2 border rounded-2">
        <span class="f6 color-fg-muted">Role:</span>
        <%= render(Primer::Beta::Label.new(scheme: role_label_scheme, size: :large)) do %>
          <%= user.role.titleize %>
        <% end %>
      </div>
      
      <!-- Organization -->
      <div class="d-flex flex-items-center flex-justify-between p-2 border rounded-2">
        <span class="f6 color-fg-muted">Organization:</span>
        <span class="f6 text-semibold"><%= organization_name %></span>
      </div>
      
      <!-- Teams -->
      <div class="d-flex flex-items-center flex-justify-between p-2 border rounded-2">
        <span class="f6 color-fg-muted">Teams:</span>
        <span class="f6 text-semibold"><%= team_count %></span>
      </div>
      
      <!-- Documents -->
      <div class="d-flex flex-items-center flex-justify-between p-2 border rounded-2">
        <span class="f6 color-fg-muted">Documents:</span>
        <span class="f6 text-semibold"><%= document_count %></span>
      </div>
      
      <!-- Joined Date -->
      <div class="d-flex flex-items-center flex-justify-between p-2 border rounded-2">
        <span class="f6 color-fg-muted">Joined:</span>
        <span class="f6 text-semibold"><%= user.created_at.strftime("%b %d, %Y") %></span>
      </div>
    </div>
  <% end %>

  <!-- Card Footer with Actions -->
  <% if can_edit_user? || can_manage_user? %>
    <%= render(Primer::Beta::BorderBox::Footer.new) do %>
      <div class="d-flex flex-items-center flex-justify-between">
        <div class="d-flex flex-items-center" style="gap: 8px;">
          <% if context == :admin %>
            <!-- Admin Context Actions -->
            <%= link_to models_user_path(user), class: "btn btn-sm btn-outline" do %>
              <%= render(Primer::Beta::Octicon.new(icon: "eye", size: :small)) %>
              <span class="ml-1">View</span>
            <% end %>
            
            <% if can_manage_user? %>
              <%= link_to models_edit_user_path(user), class: "btn btn-sm btn-outline" do %>
                <%= render(Primer::Beta::Octicon.new(icon: "pencil", size: :small)) %>
                <span class="ml-1">Edit</span>
              <% end %>
            <% end %>
          <% else %>
            <!-- General Context Actions -->
            <%= link_to models_user_path(user), class: "btn btn-sm btn-outline" do %>
              <%= render(Primer::Beta::Octicon.new(icon: "eye", size: :small)) %>
              <span class="ml-1">Profile</span>
            <% end %>
            
            <% if can_edit_user? %>
              <%= link_to models_edit_user_path(user), class: "btn btn-sm btn-outline" do %>
                <%= render(Primer::Beta::Octicon.new(icon: "pencil", size: :small)) %>
                <span class="ml-1">Edit</span>
              <% end %>
            <% end %>
          <% end %>
        </div>
      </div>
    <% end %>
  <% end %>
<% end %>
