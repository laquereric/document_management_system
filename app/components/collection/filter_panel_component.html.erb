<%= render(Primer::Beta::BorderBox.new(classes: "mb-3")) do %>
  <%= render(Primer::Beta::BorderBox::Header.new) do %>
    <%= render(Primer::Beta::Heading.new(tag: :h3, size: :small)) { "Filters" } %>
  <% end %>
  
  <div class="p-3">
    <%= form_with url: documents_path, method: :get, local: true, class: "d-flex flex-column gap-3" do |form| %>
      <!-- Search Input -->
      <%= render Primer::Alpha::FormControl.new do |form_control| %>
        <%= form_control.label(:q, "Search documents") %>
        <%= form_control.input(:q, 
            type: :text,
            value: params[:q], 
            placeholder: "Search by title, content, or tags...") %>
      <% end %>

      <!-- Status Filter -->
      <%= render Primer::Alpha::FormControl.new do |form_control| %>
        <%= form_control.label(:status_eq, "Status") %>
        <%= form_control.select(:status_eq, 
            options_for_select([["All", ""]] + status_options.map { |opt| [opt[:label], opt[:value]] }, params[:status_eq])) %>
      <% end %>

      <!-- Folder Filter -->
      <% if folder_options.any? %>
        <%= render Primer::Alpha::FormControl.new do |form_control| %>
          <%= form_control.label(:folder_id_eq, "Folder") %>
          <%= form_control.select(:folder_id_eq, 
              options_for_select([["All Folders", ""]] + folder_options.map { |opt| [opt[:label], opt[:value]] }, params[:folder_id_eq])) %>
        <% end %>
      <% end %>

      <!-- Tags Filter -->
      <% if tag_options.any? %>
        <%= render Primer::Alpha::FormControl.new do |form_control| %>
          <%= form_control.label(:tags_id_in, "Tags") %>
          <div class="d-flex flex-wrap gap-2">
            <% tag_options.each do |tag| %>
              <label class="cursor-pointer">
                <%= form.check_box :tags_id_in, 
                    { multiple: true, checked: tag[:active], class: "d-none" }, 
                    tag[:value], 
                    "" %>
                <%= render(Primer::Beta::Button.new(
                  scheme: tag[:active] ? :primary : :secondary,
                  size: :small,
                  classes: "cursor-pointer"
                )) do %>
                  <%= tag[:label] %>
                <% end %>
              </label>
            <% end %>
          </div>
        <% end %>
      <% end %>

      <!-- Action Buttons -->
      <div class="d-flex gap-2">
        <%= render(Primer::Beta::Button.new(type: :submit, scheme: :primary)) { "Apply Filters" } %>
        <%= render(Primer::Beta::Button.new(href: documents_path, scheme: :secondary)) { "Clear" } %>
      </div>
    <% end %>
  </div>
<% end %>
