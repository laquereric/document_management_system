<%= render(Primer::Alpha::ActionMenu.new(
  menu_id: "user-menu",
  position: :relative
)) do |menu| %>
  <% menu.with_show_button do %>
    <div class="d-flex flex-items-center">
      <!-- User Avatar -->
      <%= render(Primer::Alpha::Avatar.new(
        src: "", # Would use user avatar if available
        alt: user.email,
        size: 24
      )) do %>
        <%= user_initials %>
      <% end %>
      
      <!-- Dropdown Arrow -->
      <%= render(Primer::OcticonComponent.new(
        icon: :chevron_down,
        size: :small,
        ml: 1
      )) %>
    </div>
  <% end %>

  <!-- User Info Header -->
  <div class="ActionMenu-item p-2 border-bottom">
    <div class="f6 color-fg-muted">Signed in as</div>
    <div class="text-bold"><%= user.email %></div>
  </div>

  <!-- Menu Items -->
  <% menu_items.each do |item| %>
    <% if item == :divider %>
      <%= render(Primer::Alpha::ActionMenu::Divider.new) %>
    <% else %>
      <% menu.with_item(
        label: item[:label],
        href: item[:href],
        data: { method: item[:method] },
        classes: item[:classes]
      ) do %>
        <%= render(Primer::OcticonComponent.new(icon: item[:icon], mr: 2)) %>
        <%= item[:label] %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
