<%= render(Primer::Beta::BorderBox.new) do %>
  <%= render(Primer::Beta::BorderBox::Header.new) do %>
    <div class="d-flex flex-items-center flex-justify-between">
      <%= render(Primer::Beta::Heading.new(tag: :h3, size: 400)) do %>
        <%= title %>
      <% end %>
      <% if show_view_all_link? %>
        <%= render(Primer::Beta::Button.new(
          href: view_all_path,
          variant: :outline,
          size: :small
        )) do %>
          <%= view_all_text %>
        <% end %>
      <% end %>
    </div>
  <% end %>
  
  <%= render(Primer::Beta::BorderBox::Body.new) do %>
    <% if has_activities? %>
      <div class="Timeline">
        <% activities.each do |activity| %>
          <div class="TimelineItem">
            <div class="TimelineItem-badge">
              <% case activity.action %>
              <% when 'created' %>
                <%= render(Primer::Beta::Octicon.new(icon: "plus", size: :small, color: "success")) %>
              <% when 'updated' %>
                <%= render(Primer::Beta::Octicon.new(icon: "pencil", size: :small, color: "accent")) %>
              <% else %>
                <%= render(Primer::Beta::Octicon.new(icon: "pulse", size: :small, color: "muted")) %>
              <% end %>
            </div>
            <div class="TimelineItem-body">
              <div class="d-flex flex-items-center flex-justify-between">
                <div class="flex-1">
                  <div class="d-flex flex-items-center gap-2 mb-1">
                    <span class="f6 text-semibold"><%= activity.user&.name || 'Unknown User' %></span>
                    <span class="f6 color-fg-muted"><%= activity.action.humanize.downcase %></span>
                    <% if activity.document %>
                      <%= render(Primer::Beta::Link.new(href: document_path(activity.document))) do %>
                        <%= activity.document.title %>
                      <% end %>
                    <% end %>
                  </div>
                  <% if activity.notes.present? %>
                    <div class="f6 color-fg-muted">
                      <%= activity.notes %>
                    </div>
                  <% end %>
                </div>
                <div class="f6 color-fg-muted">
                  <%= time_ago_in_words(activity.created_at) %> ago
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <%= render(Ui::EmptyStateComponent.new(
        title: "No recent activity",
        description: "Activity will appear here as users interact with documents",
        icon: "pulse"
      )) %>
    <% end %>
  <% end %>
<% end %>
